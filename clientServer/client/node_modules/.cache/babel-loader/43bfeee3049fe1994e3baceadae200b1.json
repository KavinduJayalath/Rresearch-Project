{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kavin\\\\Downloads\\\\clientServer\\\\client\\\\src\\\\files.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport download from 'downloadjs';\nimport axios from 'axios';\nimport { confirm } from \"react-confirm-box\";\nimport Card from \"react-bootstrap/Card\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [filesList, setFilesList] = useState([]);\n  const [errorMsg, setErrorMsg] = useState('');\n  const [select, setSelect] = useState(\"\");\n  useEffect(() => {\n    const getFilesList = async () => {\n      try {\n        const {\n          data\n        } = await axios.get(`http://localhost:8060/violation/get`);\n        setErrorMsg('');\n        setFilesList(data);\n      } catch (error) {\n        error.response && setErrorMsg(error.response.data);\n      }\n    };\n\n    getFilesList();\n  }, []);\n\n  const downloadFile = async (id, path, mimetype) => {\n    try {\n      const result = await axios.get(`http://localhost:8060/violation/download/${id}`, {\n        responseType: 'blob'\n      });\n      const split = path.split('/');\n      const filename = split[split.length - 1];\n      setErrorMsg('');\n      return download(result.data, filename, mimetype);\n    } catch (error) {\n      if (error.response && error.response.status === 400) {\n        setErrorMsg('Error while downloading file. Try again later');\n      }\n    }\n  };\n\n  const deleteFile = async id => {\n    console.log(id);\n    const result1 = await confirm(\"Are you sure do you want to delete?\");\n\n    if (result1) {\n      const result2 = await confirm(\"This file wil be permenantly deleted!!!\");\n\n      if (result2) {\n        axios.delete(`http://localhost:8060/violation/delete/${id}`).then(res => {\n          alert(\"Deleted\");\n          window.location.reload(false);\n        }).catch(err => {\n          alert(err);\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    align: \"center\",\n    children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Violations Detected\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"count : \", filesList.length]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      align: \"right\",\n      style: {\n        width: '80rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search by date,time,location,cam\",\n        style: {\n          width: '20rem',\n          borderColor: 'transparent'\n        },\n        onChange: e => {\n          setSelect(e.target.value);\n        },\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this), \"\\xA0\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      align: \"cenetr\",\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this), errorMsg && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"errorMsg\",\n      children: errorMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: filesList.length > 0 ? filesList.map(_ref => {\n        let {\n          _id,\n          file_path,\n          file_mimetype,\n          time,\n          location,\n          camId\n        } = _ref;\n\n        if (select === \"\") {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-4\",\n            align: \"center\",\n            children: [/*#__PURE__*/_jsxDEV(Card, {\n              style: {\n                width: '15rem',\n                backgroundColor: 'transparent'\n              },\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: [/*#__PURE__*/_jsxDEV(Card.Text, {\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    class: \"card-img-top\",\n                    src: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRUFW6qa0mtd1Q1jYqXwooAQCT3wboD5WSR6Q&usqp=CAU\",\n                    alt: \"Card image\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 90,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 25\n                }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"h7\", {\n                  children: time\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 25\n                }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"h7\", {\n                  children: location\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 25\n                }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"h7\", {\n                  children: camId\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-primary\",\n                  style: {\n                    width: '13rem'\n                  },\n                  onClick: () => downloadFile(_id, file_path, file_mimetype),\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    width: \"20\",\n                    height: \"20\",\n                    fill: \"currentColor\",\n                    className: \"bi bi-download\",\n                    viewBox: \"0 0 16 16\",\n                    children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 100,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 101,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 99,\n                    columnNumber: 25\n                  }, this), \"\\xA0\\xA0\\xA0Download File\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 25\n                }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-danger mt-2\",\n                  style: {\n                    width: '3rem'\n                  },\n                  onClick: () => deleteFile(_id),\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    width: \"20\",\n                    height: \"20\",\n                    fill: \"currentColor\",\n                    class: \"bi bi-trash3\",\n                    viewBox: \"0 0 16 16\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 107,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 106,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 28\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 38\n            }, this)]\n          }, _id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 17\n          }, this);\n        } else if ((time + location + camId).toLowerCase().includes(select.toLowerCase())) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-4\",\n            align: \"center\",\n            children: [/*#__PURE__*/_jsxDEV(Card, {\n              style: {\n                width: '15rem',\n                backgroundColor: 'transparent'\n              },\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: [/*#__PURE__*/_jsxDEV(Card.Text, {\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    class: \"card-img-top\",\n                    src: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRUFW6qa0mtd1Q1jYqXwooAQCT3wboD5WSR6Q&usqp=CAU\",\n                    alt: \"Card image\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 120,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 29\n                }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"h7\", {\n                  children: time\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 29\n                }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"h7\", {\n                  children: location\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 29\n                }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"h7\", {\n                  children: camId\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-primary\",\n                  style: {\n                    width: '13rem'\n                  },\n                  onClick: () => downloadFile(_id, file_path, file_mimetype),\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    width: \"20\",\n                    height: \"20\",\n                    fill: \"currentColor\",\n                    className: \"bi bi-download\",\n                    viewBox: \"0 0 16 16\",\n                    children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 130,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 131,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 29\n                  }, this), \"\\xA0\\xA0\\xA0Download File\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 29\n                }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-danger mt-2\",\n                  style: {\n                    width: '3rem'\n                  },\n                  onClick: () => deleteFile(_id),\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    width: \"20\",\n                    height: \"20\",\n                    fill: \"currentColor\",\n                    class: \"bi bi-trash3\",\n                    viewBox: \"0 0 16 16\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 32\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 42\n            }, this)]\n          }, _id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 21\n          }, this);\n        }\n      }) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No files found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"el486QI4ho+6FqnXxzYVIeRQed4=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/kavin/Downloads/clientServer/client/src/files.js"],"names":["React","useState","useEffect","download","axios","confirm","Card","App","filesList","setFilesList","errorMsg","setErrorMsg","select","setSelect","getFilesList","data","get","error","response","downloadFile","id","path","mimetype","result","responseType","split","filename","length","status","deleteFile","console","log","result1","result2","delete","then","res","alert","window","location","reload","catch","err","width","borderColor","e","target","value","map","_id","file_path","file_mimetype","time","camId","backgroundColor","toLowerCase","includes"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport download from 'downloadjs';\r\nimport axios from 'axios';\r\nimport { confirm } from \"react-confirm-box\";\r\nimport Card from \"react-bootstrap/Card\";\r\n\r\nfunction App() {\r\n\r\n  const [filesList, setFilesList] = useState([]);\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n\r\n  const [select, setSelect] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const getFilesList = async () => {\r\n      try {\r\n        const { data } = await axios.get(`http://localhost:8060/violation/get`);\r\n        setErrorMsg('');\r\n        setFilesList(data);\r\n      } catch (error) {\r\n        error.response && setErrorMsg(error.response.data);\r\n      }\r\n    };\r\n\r\n    getFilesList();\r\n  }, []);\r\n\r\n  const downloadFile = async (id, path, mimetype) => {\r\n    try {\r\n      const result = await axios.get(`http://localhost:8060/violation/download/${id}`, {\r\n        responseType: 'blob'\r\n      });\r\n      const split = path.split('/');\r\n      const filename = split[split.length - 1];\r\n      setErrorMsg('');\r\n      return download(result.data, filename, mimetype);\r\n    } catch (error) {\r\n      if (error.response && error.response.status === 400) {\r\n        setErrorMsg('Error while downloading file. Try again later');\r\n      }\r\n    }\r\n  };\r\n\r\n  const deleteFile = async (id) => {\r\n    console.log(id);\r\n\r\n    const result1 = await confirm(\"Are you sure do you want to delete?\");\r\n    \r\n    if (result1) {\r\n      const result2 = await confirm(\"This file wil be permenantly deleted!!!\");\r\n      if(result2){\r\n        axios.delete(`http://localhost:8060/violation/delete/${id}`).then((res) => {\r\n            alert(\"Deleted\");\r\n            window.location.reload(false);\r\n        }).catch((err) => {\r\n            alert(err);\r\n        });\r\n      \r\n      }\r\n      \r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\" align='center'>\r\n      <br/><br/>\r\n      <h1>Violations Detected</h1>\r\n      <h1>count : {filesList.length}</h1>\r\n      <div align='right' style={{width:'80rem'}}>\r\n          <input type='text' placeholder='Search by date,time,location,cam' style={{width:'20rem', borderColor:'transparent'}}\r\n          onChange={(e) => {\r\n              setSelect(e.target.value);\r\n          }}\r\n          required />&nbsp;\r\n      </div>\r\n        <div align='cenetr'>\r\n        <br/><br/>\r\n        </div>\r\n      {errorMsg && <p className=\"errorMsg\">{errorMsg}</p>}\r\n        <div className=\"row\">\r\n          {filesList.length > 0 ? (\r\n            filesList.map(\r\n              ({ _id, file_path, file_mimetype, time, location, camId}) => {\r\n                if(select === \"\"){\r\n                return(\r\n                <div className=\"col-4\" align=\"center\" key={_id}>\r\n                    <Card style={{ width: '15rem', backgroundColor: 'transparent' }}>\r\n                    <Card.Body>\r\n                        <Card.Text>\r\n                        <img class=\"card-img-top\" src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRUFW6qa0mtd1Q1jYqXwooAQCT3wboD5WSR6Q&usqp=CAU\" alt=\"Card image\" />\r\n                        </Card.Text>\r\n                        &nbsp;\r\n                        <h7>{time}</h7>\r\n                        &nbsp;\r\n                        <h7>{location}</h7>\r\n                        &nbsp;\r\n                        <h7>{camId}</h7>\r\n                        <button type=\"button\" className=\"btn btn-primary\" style={{width: '13rem'}} onClick={() => downloadFile(_id, file_path, file_mimetype)}>\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" className=\"bi bi-download\" viewBox=\"0 0 16 16\">\r\n                            <path d=\"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\"/>\r\n                            <path d=\"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\"/>\r\n                        </svg>&nbsp;&nbsp;&nbsp;Download File\r\n                        </button>\r\n                        &nbsp;\r\n                        <button type=\"button\" className=\"btn btn-danger mt-2\" style={{width: '3rem'}} onClick={() => deleteFile(_id)}>\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-trash3\" viewBox=\"0 0 16 16\">\r\n                          <path d=\"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z\"/>\r\n                        </svg>\r\n                        </button>\r\n                    </Card.Body>\r\n                    </Card><br/><br/><br/>\r\n                </div>\r\n                )\r\n                }else if((time+location+camId).toLowerCase().includes(select.toLowerCase())){\r\n                  return(\r\n                    <div className=\"col-4\" align=\"center\" key={_id}>\r\n                        <Card style={{ width: '15rem', backgroundColor: 'transparent' }}>\r\n                        <Card.Body>\r\n                            <Card.Text>\r\n                            <img class=\"card-img-top\" src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRUFW6qa0mtd1Q1jYqXwooAQCT3wboD5WSR6Q&usqp=CAU\" alt=\"Card image\" />\r\n                            </Card.Text>\r\n                            &nbsp;\r\n                            <h7>{time}</h7>\r\n                            &nbsp;\r\n                            <h7>{location}</h7>\r\n                            &nbsp;\r\n                            <h7>{camId}</h7>\r\n                            <button type=\"button\" className=\"btn btn-primary\" style={{width: '13rem'}} onClick={() => downloadFile(_id, file_path, file_mimetype)}>\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" className=\"bi bi-download\" viewBox=\"0 0 16 16\">\r\n                                <path d=\"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\"/>\r\n                                <path d=\"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\"/>\r\n                            </svg>&nbsp;&nbsp;&nbsp;Download File\r\n                            </button>\r\n                            &nbsp;\r\n                            <button type=\"button\" className=\"btn btn-danger mt-2\" style={{width: '3rem'}} onClick={() => deleteFile(_id)}>\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-trash3\" viewBox=\"0 0 16 16\">\r\n                              <path d=\"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z\"/>\r\n                            </svg>\r\n                            </button>\r\n                        </Card.Body>\r\n                        </Card><br/><br/><br/>\r\n                    </div>\r\n                    )\r\n                }\r\n              }\r\n            )\r\n          ) : (\r\n            <p>No files found.</p>\r\n          )}\r\n        </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}